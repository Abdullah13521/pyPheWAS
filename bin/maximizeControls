#!/usr/bin/env python

from pyPheWAS.pyPhewasCorev2 import process_args
from pyPheWAS.maximize_bipartite import *
import sys, os

optargs = {
	'--input': 'inputfile',
	'--output':'outputfile',
	'--deltas':'deltas',
	'--keys':'keys',
	'--condition':'condition',
	'--goal' : 'goal',
	'--path' : 'path',
	'--save_matches' : 'save_matches'
}

"""
Retrieve and validate all arguments.
"""

# Retrieve Arguments
args = sys.argv[1:]

# Default Arguments
kwargs = {'save_matches' : False}

# Process the arguments
kwargs = process_args(kwargs, optargs, *args)

# Set path to being absolute
kwargs['path'] = os.path.join(os.path.abspath(kwargs['path']),'')

# Set the goal as an integer
kwargs['goal'] = int(kwargs['goal'])

# Run command with arguments
control_match(**kwargs)